import{r as e,c as s,h as t}from"./p-d44d1ddb.js";const a=class{constructor(t){e(this,t),this.valueChanged=s(this,"valueChanged",7),this.placeHolder="Add tag",this.values=[],this.currentValues=[]}valuesChangedHandler(e){this.currentValues=e||[]}componentWillLoad(){this.currentValues=this.values}async addItem(e){const s=[...this.currentValues];s.push(e),this.currentValues=s.distinct(),await this.valueChanged.emit(s)}async onInputKeyDown(e){if("Enter"!=e.key)return;e.preventDefault();const s=e.target,t=s.value.trim();0!=t.length&&(await this.addItem(t),s.value="")}async onInputBlur(e){const s=e.target,t=s.value.trim();0!=t.length&&(await this.addItem(t),s.value="")}async onDeleteTagClick(e,s){e.preventDefault(),this.currentValues=this.currentValues.filter((e=>e!==s)),await this.valueChanged.emit(this.currentValues)}render(){let e=this.currentValues||[];Array.isArray(e)||(e=[]);const s=JSON.stringify(e);return t("div",{class:"elsa-py-2 elsa-px-3 elsa-bg-white elsa-shadow-sm elsa-border elsa-border-gray-300 elsa-rounded-md"},e.map((e=>t("a",{href:"#",onClick:s=>this.onDeleteTagClick(s,e),class:"elsa-inline-block elsa-text-xs elsa-bg-blue-400 elsa-text-white elsa-py-2 elsa-px-3 elsa-mr-1 elsa-mb-1 elsa-rounded"},t("span",null,e),t("span",{class:"elsa-text-white hover:elsa-text-white elsa-ml-1"},"×")))),t("input",{type:"text",id:this.fieldId,onKeyDown:e=>this.onInputKeyDown(e),onBlur:e=>this.onInputBlur(e),class:"elsa-tag-input elsa-inline-block elsa-text-sm elsa-outline-none focus:elsa-outline-none elsa-border-none shadow:none focus:elsa-border-none focus:elsa-border-transparent focus:shadow-none",placeholder:this.placeHolder}),t("input",{type:"hidden",name:this.fieldName,value:s}))}static get watchers(){return{values:["valuesChangedHandler"]}}};a.style=".elsa-tag-input:focus{box-shadow:none!important;outline:none!important}";const l=class{constructor(t){e(this,t),this.valueChanged=s(this,"valueChanged",7),this.placeHolder="Add tag",this.values=[],this.dropdownValues=[],this.currentValues=[]}valuesChangedHandler(e){let s=[];const t=this.dropdownValues||[];e&&e.forEach((e=>{t.forEach((t=>{e===t.value&&s.push(t)}))})),this.currentValues=s||[]}componentWillLoad(){const e=this.dropdownValues||[];let s=[];this.values.forEach((t=>{e.forEach((e=>{t===e.value&&s.push(e)}))})),this.currentValues=s}async onTagSelected(e){e.preventDefault();const s=e.target,t={text:s.options[s.selectedIndex].text.trim(),value:s.value};if(0==t.value.length)return;const a=[...this.currentValues];a.push(t),this.currentValues=a.distinct(),s.value="Add",await this.valueChanged.emit(a)}async onDeleteTagClick(e,s){e.preventDefault(),this.currentValues=this.currentValues.filter((e=>e.value!==s.value)),await this.valueChanged.emit(this.currentValues)}render(){let e=this.currentValues||[],s=this.dropdownValues.filter((s=>e.findIndex((e=>e.value===s.value))<0));Array.isArray(e)||(e=[]);const a=JSON.stringify(e.map((e=>e.value)));return t("div",{class:"elsa-py-2 elsa-px-3 elsa-bg-white elsa-shadow-sm elsa-border elsa-border-gray-300 elsa-rounded-md"},e.map((e=>t("a",{href:"#",onClick:s=>this.onDeleteTagClick(s,e),class:"elsa-inline-block elsa-text-xs elsa-bg-blue-400 elsa-text-white elsa-py-2 elsa-px-3 elsa-mr-1 elsa-mb-1 rounded"},t("input",{type:"hidden",value:e.value}),t("span",null,e.text),t("span",{class:"elsa-text-white hover:elsa-text-white elsa-ml-1"},"×")))),t("select",{id:this.fieldId,class:"elsa-inline-block elsa-text-xs elsa-py-2 elsa-px-3 elsa-mr-1 elsa-mb-1 elsa-pr-8 elsa-border-gray-300 focus:elsa-outline-none focus:elsa-ring-blue-500 focus:elsa-border-blue-500 elsa-rounded",onChange:e=>this.onTagSelected(e)},t("option",{value:"Add",disabled:!0,selected:!0},this.placeHolder),s.map((e=>t("option",{value:e.value},e.text)))),t("input",{type:"hidden",name:this.fieldName,value:a}))}static get watchers(){return{values:["valuesChangedHandler"]}}};export{a as elsa_input_tags,l as elsa_input_tags_dropdown}