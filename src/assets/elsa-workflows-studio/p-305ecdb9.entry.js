import{r as e,h as t}from"./p-d44d1ddb.js";import{i as a}from"./p-1c810ec6.js";import{_ as s,t as l,a as r,b as n,d as i,i as o,e as u,f as c,g as d,h,j as f,k as p,l as g,m as x,n as w,o as y,p as v,q as m,r as b,s as k,u as C,v as S,w as M,x as D,y as I,z as B,A,B as W,C as j,D as F,E as z,F as T,G as L,c as N}from"./p-a3b5bd35.js";import{_ as Y,a as H,i as P,b as O,c as U,d as V,e as E,f as $,u as R,z as _}from"./p-6c6facd9.js";import{c as q}from"./p-a91d6039.js";import{e as K}from"./p-d17a08e5.js";import{O as G,b as Q}from"./p-25ed19bb.js";import{E as J}from"./p-f90ae5bc.js";import{a as X}from"./p-bdae1cb5.js";import{b as Z}from"./p-4bdcf3f8.js";import{D as ee}from"./p-3bc011d8.js";import{h as te}from"./p-e4caa342.js";import{l as ae}from"./p-6a489817.js";import{T as se}from"./p-151ebb97.js";import"./p-7a36e608.js";import"./p-83f217d4.js";import"./p-80de33dc.js";import"./p-e47f7c7d.js";var le=Math.ceil,re=Math.max,ne=function(e,t,a,s){var l=-1,r=Y,n=!0,i=e.length,o=[],u=t.length;if(!i)return o;a&&(t=c(t,d(a))),s?(r=H,n=!1):t.length>=200&&(r=f,n=!1,t=new h(t));e:for(;++l<i;){var p=e[l],g=null==a?p:a(p);if(p=s||0!==p?p:0,n&&g==g){for(var x=u;x--;)if(t[x]===g)continue e;o.push(p)}else r(t,g,s)||o.push(p)}return o},ie=p((function(e,t){return P(e)?ne(e,i(t,1,P,!0)):[]})),oe=p((function(e,t){var a=x(t);return P(a)&&(a=void 0),P(e)?ne(e,i(t,1,P,!0),g(a)):[]})),ue=p((function(e,t){var a=x(t);return P(a)&&(a=void 0),P(e)?ne(e,i(t,1,P,!0),void 0,a):[]})),ce=function(e,t,a,s){for(var l=e.length,n=s?l:-1;(s?n--:++n<l)&&t(e[n],n,e););return a?r(e,s?0:n,s?n+1:l):r(e,s?n+1:0,s?l:n)},de=function(e,t,a,s){var r=e.length;for((a=l(a))<0&&(a=-a>r?0:r+a),(s=void 0===s||s>r?r:l(s))<0&&(s+=r),s=a>s?0:function(e){return e?w(l(e),0,4294967295):0}(s);a<s;)e[a++]=t;return e},he=function(e){return e&&e.length?e[0]:void 0},fe=he,pe=Math.max,ge=Math.min,xe=function(e,t,a){for(var s=a?H:Y,l=e[0].length,r=e.length,n=r,i=Array(r),o=1/0,u=[];n--;){var p=e[n];n&&t&&(p=c(p,d(t))),o=ge(p.length,o),i[n]=!a&&(t||l>=120&&p.length>=120)?new h(n&&p):void 0}p=e[0];var g=-1,x=i[0];e:for(;++g<l&&u.length<o;){var w=p[g],y=t?t(w):w;if(w=a||0!==w?w:0,!(x?f(x,y):s(u,y,a))){for(n=r;--n;){var v=i[n];if(!(v?f(v,y):s(e[n],y,a)))continue e}x&&x.push(y),u.push(w)}}return u},we=function(e){return P(e)?e:[]},ye=p((function(e){var t=c(e,we);return t.length&&t[0]===e[0]?xe(t):[]})),ve=p((function(e){var t=x(e),a=c(e,we);return t===x(a)?t=void 0:a.pop(),a.length&&a[0]===e[0]?xe(a,g(t)):[]})),me=p((function(e){var t=x(e),a=c(e,we);return(t="function"==typeof t?t:void 0)&&a.pop(),a.length&&a[0]===e[0]?xe(a,void 0,t):[]})),be=Array.prototype.join,ke=Math.max,Ce=Math.min,Se=function(e,t,a,s){for(var l=a-1,r=e.length;++l<r;)if(s(e[l],t))return l;return-1},Me=Array.prototype.splice,De=function(e,t,a,s){var l=s?Se:y,r=-1,n=t.length,i=e;for(e===t&&(t=u(t)),a&&(i=c(e,d(a)));++r<n;)for(var o=0,h=t[r],f=a?a(h):h;(o=l(i,f,o,s))>-1;)i!==e&&Me.call(i,o,1),Me.call(e,o,1);return e},Ie=function(e,t){return e&&e.length&&t&&t.length?De(e,t):e},Be=p(Ie),Ae=Array.prototype.splice,We=function(e,t){for(var a=e?t.length:0,s=a-1;a--;){var l=t[a];if(a==s||l!==r){var r=l;b(l)?Ae.call(e,l,1):(i=S(i=l,n=e),null==(n=M(n,i))||delete n[C(x(i))])}}var n,i;return e},je=O((function(e,t){var a=null==e?0:e.length,s=function(e,t){for(var a=-1,s=t.length,l=Array(s),r=null==e;++a<s;)l[a]=r?void 0:k(e,t[a]);return l}(e,t);return We(e,c(t,(function(e){return b(e,a)?+e:e})).sort(D)),s})),Fe=Array.prototype.reverse,ze=Math.floor,Te=Math.min,Le=function(e,t,a,s){var l=0,r=null==e?0:e.length;if(0===r)return 0;for(var n=(t=a(t))!=t,i=null===t,o=I(t),u=void 0===t;l<r;){var c=ze((l+r)/2),d=a(e[c]),h=void 0!==d,f=null===d,p=d==d,g=I(d);if(n)var x=s||p;else x=u?p&&(s||h):i?p&&h&&(s||!f):o?p&&h&&!f&&(s||!g):!f&&!g&&(s?d<=t:d<t);x?l=c+1:r=c}return Te(r,4294967294)},Ne=function(e,t,a){var s=0,l=null==e?s:e.length;if("number"==typeof t&&t==t&&l<=2147483647){for(;s<l;){var r=s+l>>>1,n=e[r];null!==n&&!I(n)&&(a?n<=t:n<t)?s=r+1:l=r}return l}return Le(e,t,B,a)},Ye=function(e,t){for(var a=-1,s=e.length,l=0,r=[];++a<s;){var n=e[a],i=t?t(n):n;if(!a||!A(i,o)){var o=i;r[l++]=0===n?0:n}}return r},He=p((function(e){var t=x(e);return P(t)&&(t=void 0),U(i(e,1,P,!0),g(t))})),Pe=p((function(e){var t=x(e);return t="function"==typeof t?t:void 0,U(i(e,1,P,!0),void 0,t)})),Oe=Math.max,Ue=function(e){if(!e||!e.length)return[];var t=0;return e=W(e,(function(e){if(P(e))return t=Oe(e.length,t),!0})),j(t,(function(t){return c(e,F(t))}))},Ve=function(e,t){if(!e||!e.length)return[];var a=Ue(e);return null==t?a:c(a,(function(e){return z(t,void 0,e)}))},Ee=p((function(e,t){return P(e)?ne(e,t):[]})),$e=function(e,t,a){var s=e.length;if(s<2)return s?U(e[0]):[];for(var l=-1,r=Array(s);++l<s;)for(var n=e[l],o=-1;++o<s;)o!=l&&(r[l]=ne(r[l]||n,e[o],t,a));return U(i(r,1),t,a)},Re=p((function(e){return $e(W(e,P))})),_e=p((function(e){var t=x(e);return P(t)&&(t=void 0),$e(W(e,P),g(t))})),qe=p((function(e){var t=x(e);return t="function"==typeof t?t:void 0,$e(W(e,P),void 0,t)})),Ke=p(Ue),Ge=p((function(e){var t=e.length,a=t>1?e[t-1]:void 0;return a="function"==typeof a?(e.pop(),a):void 0,Ve(e,a)})),Qe={chunk:function(e,t,a){t=(a?s(e,t,a):void 0===t)?1:re(l(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var i=0,o=0,u=Array(le(n/t));i<n;)u[o++]=r(e,i,i+=t);return u},compact:function(e){for(var t=-1,a=null==e?0:e.length,s=0,l=[];++t<a;){var r=e[t];r&&(l[s++]=r)}return l},concat:function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),a=arguments[0],s=e;s--;)t[s-1]=arguments[s];return n(o(a)?u(a):[a],i(t,1))},difference:ie,differenceBy:oe,differenceWith:ue,drop:function(e,t,a){var s=null==e?0:e.length;return s?(t=a||void 0===t?1:l(t),r(e,t<0?0:t,s)):[]},dropRight:function(e,t,a){var s=null==e?0:e.length;return s?(t=a||void 0===t?1:l(t),r(e,0,(t=s-t)<0?0:t)):[]},dropRightWhile:function(e,t){return e&&e.length?ce(e,g(t),!0,!0):[]},dropWhile:function(e,t){return e&&e.length?ce(e,g(t),!0):[]},fill:function(e,t,a,l){var r=null==e?0:e.length;return r?(a&&"number"!=typeof a&&s(e,t,a)&&(a=0,l=r),de(e,t,a,l)):[]},findIndex:T,findLastIndex:L,first:fe,flatten:$,flattenDeep:function(e){return null!=e&&e.length?i(e,1/0):[]},flattenDepth:function(e,t){return null!=e&&e.length?(t=void 0===t?1:l(t),i(e,t)):[]},fromPairs:function(e){for(var t=-1,a=null==e?0:e.length,s={};++t<a;){var l=e[t];s[l[0]]=l[1]}return s},head:he,indexOf:function(e,t,a){var s=null==e?0:e.length;if(!s)return-1;var r=null==a?0:l(a);return r<0&&(r=pe(s+r,0)),y(e,t,r)},initial:function(e){return null!=e&&e.length?r(e,0,-1):[]},intersection:ye,intersectionBy:ve,intersectionWith:me,join:function(e,t){return null==e?"":be.call(e,t)},last:x,lastIndexOf:function(e,t,a){var s=null==e?0:e.length;if(!s)return-1;var r=s;return void 0!==a&&(r=(r=l(a))<0?ke(s+r,0):Ce(r,s-1)),t==t?function(e,t,a){for(var s=a+1;s--;)if(e[s]===t)return s;return s}(e,t,r):v(e,m,r,!0)},nth:function(e,t){return e&&e.length?function(e,t){var a=e.length;if(a)return b(t+=t<0?a:0,a)?e[t]:void 0}(e,l(t)):void 0},pull:Be,pullAll:Ie,pullAllBy:function(e,t,a){return e&&e.length&&t&&t.length?De(e,t,g(a)):e},pullAllWith:function(e,t,a){return e&&e.length&&t&&t.length?De(e,t,void 0,a):e},pullAt:je,remove:function(e,t){var a=[];if(!e||!e.length)return a;var s=-1,l=[],r=e.length;for(t=g(t);++s<r;){var n=e[s];t(n,s,e)&&(a.push(n),l.push(s))}return We(e,l),a},reverse:function(e){return null==e?e:Fe.call(e)},slice:function(e,t,a){var n=null==e?0:e.length;return n?(a&&"number"!=typeof a&&s(e,t,a)?(t=0,a=n):(t=null==t?0:l(t),a=void 0===a?n:l(a)),r(e,t,a)):[]},sortedIndex:function(e,t){return Ne(e,t)},sortedIndexBy:function(e,t,a){return Le(e,t,g(a))},sortedIndexOf:function(e,t){var a=null==e?0:e.length;if(a){var s=Ne(e,t);if(s<a&&A(e[s],t))return s}return-1},sortedLastIndex:function(e,t){return Ne(e,t,!0)},sortedLastIndexBy:function(e,t,a){return Le(e,t,g(a),!0)},sortedLastIndexOf:function(e,t){if(null!=e&&e.length){var a=Ne(e,t,!0)-1;if(A(e[a],t))return a}return-1},sortedUniq:function(e){return e&&e.length?Ye(e):[]},sortedUniqBy:function(e,t){return e&&e.length?Ye(e,g(t)):[]},tail:function(e){var t=null==e?0:e.length;return t?r(e,1,t):[]},take:function(e,t,a){return e&&e.length?(t=a||void 0===t?1:l(t),r(e,0,t<0?0:t)):[]},takeRight:function(e,t,a){var s=null==e?0:e.length;return s?(t=a||void 0===t?1:l(t),r(e,(t=s-t)<0?0:t,s)):[]},takeRightWhile:function(e,t){return e&&e.length?ce(e,g(t),!1,!0):[]},takeWhile:function(e,t){return e&&e.length?ce(e,g(t)):[]},union:R,unionBy:He,unionWith:Pe,uniq:function(e){return e&&e.length?U(e):[]},uniqBy:function(e,t){return e&&e.length?U(e,g(t)):[]},uniqWith:function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?U(e,void 0,t):[]},unzip:Ue,unzipWith:Ve,without:Ee,xor:Re,xorBy:_e,xorWith:qe,zip:Ke,zipObject:_,zipObjectDeep:function(e,t){return V(e||[],t||[],E)},zipWith:Ge};const Je={en:{default:{Title:"Workflow Instances",Search:"Search",Untitled:"Untitled",Table:{Id:"ID",CorrelationId:"Correlation ID",Workflow:"Workflow",Version:"Version",InstanceName:"Instance Name",Status:"Status",Created:"Created",Finished:"Finished",LastExecuted:"Last Executed",Faulted:"Faulted",ContextMenu:{View:"View",Cancel:"Cancel",Delete:"Delete"}},CancelDialog:{Title:"Cancel Workflow Instance",Message:"Are you sure you wish to cancel this workflow instance?"},DeleteDialog:{Title:"Delete Workflow Instance",Message:"Are you sure you wish to permanently delete this workflow instance?"},BulkCancelDialog:{Title:"Cancel Selected Workflow Instances",Message:"Are you sure you wish to cancel all selected workflow instances?"},BulkDeleteDialog:{Title:"Delete Selected Workflow Instances",Message:"Are you sure you wish to permanently delete all selected workflow instances?"},Pager:{Display:"Showing {{Start}} to {{End}} of {{Results}} results"},BulkActions:{Title:"Bulk Actions",Actions:{Cancel:"Cancel",Delete:"Delete"}},Filters:{Workflow:{Label:"Workflow",All:"All"},Status:{All:"All",Label:"Status",Running:"Running",Idle:"Idle",Suspended:"Suspended",Faulted:"Faulted",Finished:"Finished",Cancelled:"Cancelled"},Sort:{Label:"Sort",SelectedLabel:"Sort by: {{Key}}",Finished:"Finished",LastExecuted:"Last Executed",Started:"Started"},PageSize:{SelectedLabel:"Page size: {{Size}}"}}}},"nl-NL":{default:{}}},Xe=class{constructor(t){e(this,t),this.orderBy=G.Started,this.workflowBlueprints=[],this.workflowInstances={items:[],page:1,pageSize:50,totalCount:0},this.selectedOrderByState=G.Started,this.selectedWorkflowInstanceIds=[],this.currentPage=0,this.currentPageSize=Xe.DEFAULT_PAGE_SIZE,this.t=(e,t)=>this.i18next.t(e,t),this.onPaged=async e=>{this.currentPage=e.detail.page,await this.loadWorkflowInstances()}}async componentWillLoad(){this.i18next=await ae(this.culture,Je),this.history&&(this.history.listen((e=>this.routeChanged(e))),this.applyQueryString(this.history.location.search)),await this.loadWorkflowBlueprints(),await this.loadWorkflowInstances();const e=this.t;let t=[{text:e("BulkActions.Actions.Cancel"),name:"Cancel"},{text:e("BulkActions.Actions.Delete"),name:"Delete"}];await K.emit(J.WorkflowInstanceBulkActionsLoading,this,{sender:this,bulkActions:t}),this.bulkActions=t}async getSelectedWorkflowInstanceIds(){return this.selectedWorkflowInstanceIds}async refresh(){await this.loadWorkflowInstances(),this.updateSelectAllChecked()}async handleWorkflowIdChanged(e){this.selectedWorkflowId=e,await this.loadWorkflowInstances()}async handleWorkflowStatusChanged(e){this.selectedWorkflowStatus=e,await this.loadWorkflowInstances()}async handlePageSizeChanged(e){this.currentPageSize=e,this.currentPageSize=isNaN(this.currentPageSize)?Xe.DEFAULT_PAGE_SIZE:this.currentPageSize,this.currentPageSize=Math.max(Math.min(this.currentPageSize,Xe.MAX_PAGE_SIZE),Xe.MIN_PAGE_SIZE),await this.loadWorkflowInstances()}async handleOrderByChanged(e){this.selectedOrderByState=e,await this.loadWorkflowInstances()}applyQueryString(e){var t;const a=Z(e);this.selectedWorkflowId=a.workflow,this.selectedWorkflowStatus=a.status,this.selectedOrderByState=null!==(t=a.orderBy)&&void 0!==t?t:G.Started,this.currentPage=a.page?parseInt(a.page):0,this.currentPage=isNaN(this.currentPage)?Xe.START_PAGE:this.currentPage,this.currentPageSize=a.pageSize?parseInt(a.pageSize):Xe.DEFAULT_PAGE_SIZE,this.currentPageSize=isNaN(this.currentPageSize)?Xe.DEFAULT_PAGE_SIZE:this.currentPageSize,this.currentPageSize=Math.max(Math.min(this.currentPageSize,Xe.MAX_PAGE_SIZE),Xe.MIN_PAGE_SIZE)}async loadWorkflowBlueprints(){const e=await this.createClient(),t=await e.workflowRegistryApi.list(null,null,{allVersions:!0});this.workflowBlueprints=t.items}async loadWorkflowInstances(){this.currentPage=isNaN(this.currentPage)?Xe.START_PAGE:this.currentPage,this.currentPage=Math.max(this.currentPage,Xe.START_PAGE),this.currentPageSize=isNaN(this.currentPageSize)?Xe.DEFAULT_PAGE_SIZE:this.currentPageSize;const e=await this.createClient();this.workflowInstances=await e.workflowInstancesApi.list(this.currentPage,this.currentPageSize,this.selectedWorkflowId,this.selectedWorkflowStatus,this.selectedOrderByState,this.currentSearchTerm);const t=Math.floor(this.workflowInstances.totalCount/this.currentPageSize);this.currentPage>t&&(this.currentPage=t,this.workflowInstances=await e.workflowInstancesApi.list(this.currentPage,this.currentPageSize,this.selectedWorkflowId,this.selectedWorkflowStatus,this.selectedOrderByState,this.currentSearchTerm))}createClient(){return X(this.serverUrl)}getLatestWorkflowBlueprintVersions(){const e=N.groupBy(this.workflowBlueprints,"id");return N.map(e,(e=>Qe.first(N.sortBy(e,"version","desc"))))}buildFilterUrl(e,t,a,s){const l={};e&&(l.workflow=e),t&&(l.status=t),a&&(l.orderBy=a),this.currentPage&&(l.page=this.currentPage.toString());var r=s||this.currentPageSize;return r=Math.max(Math.min(r,100),Xe.MIN_PAGE_SIZE),l.pageSize=r.toString(),r!=this.currentPageSize&&(l.page=Math.floor(this.currentPage*this.currentPageSize/r).toString()),`/workflow-instances?${N.map(l,((e,t)=>`${t}=${e}`)).join("&")}`}getStatusColor(e){switch(e){default:case Q.Idle:return"gray";case Q.Running:return"rose";case Q.Suspended:return"blue";case Q.Finished:return"green";case Q.Faulted:return"red";case Q.Cancelled:return"yellow"}}updateSelectAllChecked(){this.selectAllChecked=0!=this.workflowInstances.items.length&&this.workflowInstances.items.findIndex((e=>this.selectedWorkflowInstanceIds.findIndex((t=>t==e.id))<0))<0}async routeChanged(e){e.pathname.toLowerCase().indexOf("workflow-instances")<0||(this.applyQueryString(e.search),await this.loadWorkflowInstances())}onSelectAllCheckChange(e){const t=e.target.checked;this.selectAllChecked=t,this.selectedWorkflowInstanceIds=[],t&&(this.selectedWorkflowInstanceIds=this.workflowInstances.items.map((e=>e.id)))}onWorkflowInstanceCheckChange(e,t){this.selectedWorkflowInstanceIds=e.target.checked?[...this.selectedWorkflowInstanceIds,t.id]:this.selectedWorkflowInstanceIds.filter((e=>e!=t.id)),this.updateSelectAllChecked()}async onCancelClick(e,t){const a=this.t;if(!await q.show(a("CancelDialog.Title"),a("CancelDialog.Message")))return;const s=await this.createClient();await s.workflowInstancesApi.cancel(t.id),await this.loadWorkflowInstances()}async onDeleteClick(e,t){const a=this.t;if(!await q.show(a("DeleteDialog.Title"),a("DeleteDialog.Message")))return;const s=await this.createClient();await s.workflowInstancesApi.delete(t.id),await this.loadWorkflowInstances()}async onBulkCancel(){const e=this.t;if(!await q.show(e("BulkCancelDialog.Title"),e("BulkCancelDialog.Message")))return;const t=await this.createClient();await t.workflowInstancesApi.bulkCancel({workflowInstanceIds:this.selectedWorkflowInstanceIds}),this.selectedWorkflowInstanceIds=[],await this.loadWorkflowInstances(),this.currentPage=0}async onBulkDelete(){const e=this.t;if(!await q.show(e("BulkDeleteDialog.Title"),e("BulkDeleteDialog.Message")))return;const t=await this.createClient();await t.workflowInstancesApi.bulkDelete({workflowInstanceIds:this.selectedWorkflowInstanceIds}),this.selectedWorkflowInstanceIds=[],await this.loadWorkflowInstances(),this.currentPage=0}async onBulkActionSelected(e){const t=e.detail;switch(t.name){case"Cancel":await this.onBulkCancel();break;case"Delete":await this.onBulkDelete();break;default:t.handler()}this.updateSelectAllChecked()}async onSearch(e){e.preventDefault();const t=new FormData(e.currentTarget).get("searchTerm");this.currentSearchTerm=t.toString(),await this.loadWorkflowInstances()}render(){const e=this.basePath,a=this.workflowInstances.items,s=this.workflowBlueprints,l=this.workflowInstances.totalCount,r=this.t;return t("div",null,t("div",{class:"elsa-relative elsa-z-10 elsa-flex-shrink-0 elsa-flex elsa-h-16 elsa-bg-white elsa-border-b elsa-border-gray-200"},t("div",{class:"elsa-flex-1 elsa-px-4 elsa-flex elsa-justify-between sm:elsa-px-6 lg:elsa-px-8"},t("div",{class:"elsa-flex-1 elsa-flex"},t("form",{class:"elsa-w-full elsa-flex md:ml-0",onSubmit:e=>this.onSearch(e)},t("label",{htmlFor:"search_field",class:"elsa-sr-only"},"Search"),t("div",{class:"elsa-relative elsa-w-full elsa-text-cool-gray-400 focus-within:elsa-text-cool-gray-600"},t("div",{class:"elsa-absolute elsa-inset-y-0 elsa-left-0 elsa-flex elsa-items-center elsa-pointer-events-none"},t("svg",{class:"elsa-h-5 elsa-w-5",fill:"currentColor",viewBox:"0 0 20 20"},t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"}))),t("input",{name:"searchTerm",class:"elsa-block elsa-w-full elsa-h-full elsa-pl-8 elsa-pr-3 elsa-py-2 elsa-rounded-md elsa-text-cool-gray-900 elsa-placeholder-cool-gray-500 focus:elsa-placeholder-cool-gray-400 sm:elsa-text-sm elsa-border-0 focus:elsa-outline-none focus:elsa-ring-0",placeholder:r("Search"),type:"search"})))))),t("div",{class:"elsa-p-8 elsa-flex elsa-content-end elsa-justify-right elsa-bg-white elsa-space-x-4"},t("div",{class:"elsa-flex-shrink-0"},this.renderBulkActions()),t("div",{class:"elsa-flex-1"}," "),this.renderPageSizeFilter(),this.renderWorkflowFilter(),this.renderStatusFilter(),this.renderOrderByFilter()),t("div",{class:"elsa-mt-8 sm:elsa-block"},t("div",{class:"elsa-align-middle elsa-inline-block elsa-min-w-full elsa-border-b elsa-border-gray-200"},t("table",{class:"elsa-min-w-full"},t("thead",null,t("tr",{class:"elsa-border-t elsa-border-gray-200"},t("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},t("input",{type:"checkbox",value:"true",checked:this.selectAllChecked,onChange:e=>this.onSelectAllCheckChange(e),class:"focus:elsa-ring-blue-500 elsa-h-4 elsa-w-4 elsa-text-blue-600 elsa-border-gray-300 elsa-rounded"})),t("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.Id")),t("th",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.CorrelationId")),t("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.Workflow")),t("th",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-right elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.Version")),t("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.InstanceName")),t("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.Status")),t("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.Created")),t("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.Finished")),t("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.LastExecuted")),t("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.Faulted")),t("th",{class:"elsa-pr-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"}))),t("tbody",{class:"elsa-bg-white elsa-divide-y elsa-divide-gray-100"},a.map((a=>{var l;const n=null!==(l=s.find((e=>e.id==a.definitionId&&e.version==a.version)))&&void 0!==l?l:{name:"Not Found",displayName:"(Workflow definition not found)"},i=n.displayName||n.name||"Untitled",o=this.getStatusColor(a.workflowStatus),u=`${e}/workflow-instances/${a.id}`,c=`${e}/workflow-registry/${a.definitionId}`,d=a.name?a.name:"",h=this.selectedWorkflowInstanceIds.findIndex((e=>e===a.id))>=0,f=te(a.createdAt),p=a.finishedAt?te(a.finishedAt):null,g=a.lastExecutedAt?te(a.lastExecutedAt):null,x=a.faultedAt?te(a.faultedAt):null;return t("tr",null,t("td",{class:"elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-900"},t("input",{type:"checkbox",value:a.id,checked:h,onChange:e=>this.onWorkflowInstanceCheckChange(e,a),class:"focus:elsa-ring-blue-500 elsa-h-4 elsa-w-4 elsa-text-blue-600 elsa-border-gray-300 elsa-rounded"})),t("td",{class:"elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-900"},t("stencil-route-link",{url:u,anchorClass:"elsa-truncate hover:elsa-text-gray-600"},a.id)),t("td",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-900"},a.correlationId?a.correlationId:""),t("td",{class:"elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-900 elsa-text-left"},t("stencil-route-link",{url:c,anchorClass:"elsa-truncate hover:elsa-text-gray-600"},i)),t("td",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-right elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-uppercase"},a.version),t("td",{class:"elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-900 elsa-text-left"},t("stencil-route-link",{url:u,anchorClass:"elsa-truncate hover:elsa-text-gray-600"},d)),t("td",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-text-right"},t("div",{class:"elsa-flex elsa-items-center elsa-space-x-3 lg:elsa-pl-2"},t("div",{class:`flex-shrink-0 elsa-w-2-5 elsa-h-2-5 elsa-rounded-full elsa-bg-${o}-600`}),t("span",null,a.workflowStatus))),t("td",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-text-left"},f.format("DD-MM-YYYY HH:mm:ss")),t("td",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-text-left"},p?p.format("DD-MM-YYYY HH:mm:ss"):"-"),t("td",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-text-left"},g?g.format("DD-MM-YYYY HH:mm:ss"):"-"),t("td",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-text-left"},x?x.format("DD-MM-YYYY HH:mm:ss"):"-"),t("td",{class:"elsa-pr-6"},t("elsa-context-menu",{history:this.history,menuItems:[{text:r("Table.ContextMenu.View"),anchorUrl:u,icon:t("svg",{class:"elsa-h-5 elsa-w-5 elsa-text-gray-500",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}))},{text:r("Table.ContextMenu.Cancel"),clickHandler:e=>this.onCancelClick(e,a),icon:t("svg",{class:"elsa-h-5 elsa-w-5 elsa-text-gray-500",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"}))},{text:r("Table.ContextMenu.Delete"),clickHandler:e=>this.onDeleteClick(e,a),icon:t("svg",{class:"elsa-h-5 elsa-w-5 elsa-text-gray-500",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},t("path",{stroke:"none",d:"M0 0h24v24H0z"}),t("line",{x1:"4",y1:"7",x2:"20",y2:"7"}),t("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),t("line",{x1:"14",y1:"11",x2:"14",y2:"17"}),t("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),t("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"}))}]})))})))),t("elsa-pager",{page:this.currentPage,pageSize:this.currentPageSize,totalCount:l,history:this.history,onPaged:this.onPaged,culture:this.culture}))))}renderBulkActions(){const e=t("svg",{class:"elsa-mr-3 elsa-h-5 elsa-w-5 elsa-text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M13 10V3L4 14h7v7l9-11h-7z"})),a=this.bulkActions;return t("elsa-dropdown-button",{text:(0,this.t)("BulkActions.Title"),items:a,icon:e,origin:ee.TopLeft,onItemSelected:e=>this.onBulkActionSelected(e)})}renderWorkflowFilter(){const e=this.t,a=this.getLatestWorkflowBlueprintVersions(),s=this.selectedWorkflowId,l=a.find((e=>e.id==s)),r=s?l&&(l.name||l.displayName)?l.displayName||l.name:e("Untitled"):e("Filters.Workflow.Label"),n=this.selectedWorkflowStatus,i=this.selectedOrderByState,o=this.history;let u=a.map((t=>{const a={text:t.displayName&&t.displayName.length>0?t.displayName:t.name||e("Untitled"),value:t.id,isSelected:t.id==s};return o&&(a.url=this.buildFilterUrl(t.id,n,i,null)),a}));const c={text:e("Filters.Workflow.All"),value:null,isSelected:!s};return o&&(c.url=this.buildFilterUrl(null,n,i,null)),u=[c,...u],t("elsa-dropdown-button",{text:r,items:u,icon:t("svg",{class:"elsa-mr-3 elsa-h-5 elsa-w-5 elsa-text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t("path",{stroke:"none",d:"M0 0h24v24H0z"}),t("rect",{x:"4",y:"4",width:"6",height:"6",rx:"1"}),t("rect",{x:"14",y:"4",width:"6",height:"6",rx:"1"}),t("rect",{x:"4",y:"14",width:"6",height:"6",rx:"1"}),t("rect",{x:"14",y:"14",width:"6",height:"6",rx:"1"})),origin:ee.TopRight,onItemSelected:e=>this.handleWorkflowIdChanged(e.detail.value)})}renderStatusFilter(){const e=this.t,a=this.selectedWorkflowStatus,s=a||e("Filters.Status.Label"),l=this.history,r=[null,Q.Running,Q.Suspended,Q.Finished,Q.Faulted,Q.Cancelled,Q.Idle].map((t=>{const s={text:null!=t?t:e("Filters.Status.All"),isSelected:t==a,value:t};return l&&(s.url=this.buildFilterUrl(this.selectedWorkflowId,t,this.selectedOrderByState,null)),s}));return t("elsa-dropdown-button",{text:s,items:r,icon:t("svg",{class:"elsa-mr-3 elsa-h-5 elsa-w-5 elsa-text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t("circle",{cx:"12",cy:"12",r:"10"}),t("polygon",{points:"10 8 16 12 10 16 10 8"})),origin:ee.TopRight,onItemSelected:e=>this.handleWorkflowStatusChanged(e.detail.value)})}renderPageSizeFilter(){const e=this.currentPageSize,a=(0,this.t)("Filters.PageSize.SelectedLabel",{Size:e}),s=this.history,l=[5,10,15,20,30,50,100].map((t=>{const a={text:""+t,isSelected:t==e,value:t};return s&&(a.url=this.buildFilterUrl(this.selectedWorkflowId,this.selectedWorkflowStatus,this.selectedOrderByState,t)),a}));return t("elsa-dropdown-button",{text:a,items:l,icon:t("svg",{class:"elsa-mr-3 elsa-h-5 elsa-w-5 elsa-text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4h13M3 8h9m-9 8h9m-9 4h9m5"})),origin:ee.TopRight,onItemSelected:e=>this.handlePageSizeChanged(e.detail.value)})}renderOrderByFilter(){const e=this.t,a=this.selectedOrderByState,s=a?e("Filters.Sort.SelectedLabel",{Key:a}):e("Filters.Sort.Label"),l=this.history,r=[G.Finished,G.LastExecuted,G.Started].map((e=>{const t={text:e,value:e,isSelected:e==a};return l&&(t.url=this.buildFilterUrl(this.selectedWorkflowId,this.selectedWorkflowStatus,e,null)),t}));return t("elsa-dropdown-button",{text:s,items:r,icon:t("svg",{class:"elsa-mr-3 elsa-h-5 elsa-w-5 elsa-text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"})),origin:ee.TopRight,onItemSelected:e=>this.handleOrderByChanged(e.detail.value)})}static get watchers(){return{workflowId:["handleWorkflowIdChanged"],workflowStatus:["handleWorkflowStatusChanged"],currentPageSize:["handlePageSizeChanged"],orderBy:["handleOrderByChanged"]}}};Xe.DEFAULT_PAGE_SIZE=15,Xe.MIN_PAGE_SIZE=5,Xe.MAX_PAGE_SIZE=100,Xe.START_PAGE=0,se.injectProps(Xe,["serverUrl","culture","basePath"]),a(Xe);export{Xe as elsa_workflow_instance_list_screen}