import{e as t}from"./p-d17a08e5.js";import{S as s}from"./p-25ed19bb.js";import{E as e}from"./p-f90ae5bc.js";import"./p-a3b5bd35.js";import{h as n,g as i,s as r,p as o}from"./p-4bdcf3f8.js";import{h as a}from"./p-d44d1ddb.js";import{p as c}from"./p-83791530.js";import{a as p}from"./p-f6467a51.js";class l{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const s=t.activityModel;if("If"!==s.type)return;const e=(s.properties||[]).find((t=>"Condition"==t.name))||{name:"Condition",expressions:{Literal:""},syntax:"Literal"},i=s.description,r=n(i&&i.length>0?i:e.expressions[e.syntax]||"");t.bodyDisplay=`<p>${r}</p>`}}class y{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDisplaying)}onActivityDisplaying(t){const e=t.activityModel;if("HttpEndpoint"!==e.type)return;const i=(e.properties||[]).find((t=>"Path"==t.name))||{name:"Path",expressions:{Literal:"",syntax:s.Literal}},r=n(i.expressions[i.syntax||s.Literal]);t.bodyDisplay=`<p>${r}</p>`}}class u{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const s=t.activityModel;if("Timer"!==s.type)return;const e=(s.properties||[]).find((t=>"Timeout"==t.name))||{name:"Timeout",expressions:{Literal:""},syntax:"Literal"},i=n(e.expressions[e.syntax]||"");t.bodyDisplay=`<p>${i}</p>`}}class d{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const e=t.activityModel;if("WriteLine"!==e.type)return;const i=(e.properties||[]).find((t=>"Text"==t.name))||{name:"Text",expressions:{Literal:""},syntax:s.Literal};t.bodyDisplay=`<p>${n(i.expressions[i.syntax||"Literal"]||"")}</p>`}}class h{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const e=t.activityModel;if("SendEmail"!==e.type)return;const i=(e.properties||[]).find((t=>"To"==t.name))||{expressions:{Json:""},syntax:s.Json},r=e.description,o=n(r&&r.length>0?r:i.expressions[i.syntax||s.Json]||"");t.bodyDisplay=`<p>To: ${o}</p>`}}class g{display(t,s){const e=i(t,s.name);return a("elsa-check-list-property",{propertyDescriptor:s,propertyModel:e})}update(t,s,e){}}class D{display(t,s){const e=i(t,s.name);return a("elsa-checkbox-property",{propertyDescriptor:s,propertyModel:e})}update(t,s,e){}}class m{display(t,s){const e=i(t,s.name),n=s.options||{},r=this.getEditorHeight(n);return a("elsa-script-property",{propertyDescriptor:s,propertyModel:e,"editor-height":r,syntax:n.syntax,context:n.context})}update(t,s,e){const n=e.get(s.name);r(t,s.name,n,"Literal")}getEditorHeight(t){switch(t.editorHeight||"Default"){case"Large":return"20em";case"Default":default:return"8em"}}}class x{display(t,s){const e=i(t,s.name);return a("elsa-dropdown-property",{propertyDescriptor:s,propertyModel:e})}update(t,s,e){}}class f{display(t,s){const e=i(t,s.name);return a("elsa-json-property",{propertyDescriptor:s,propertyModel:e})}update(t,s,e){}}class A{display(t,s){const e=i(t,s.name);return a("elsa-multi-text-property",{propertyDescriptor:s,propertyModel:e})}update(t,s,e){}}class v{display(t,s){const e=i(t,s.name);return a("elsa-multi-line-property",{propertyDescriptor:s,propertyModel:e})}update(t,s,e){}}class S{display(t,s){const e=i(t,s.name);return a("elsa-radio-list-property",{propertyDescriptor:s,propertyModel:e})}update(t,s,e){}}class w{display(t,s){const e=i(t,s.name);return a("elsa-single-line-property",{propertyDescriptor:s,propertyModel:e})}}class L{display(t,s){const e=i(t,s.name);return a("elsa-switch-cases-property",{propertyDescriptor:s,propertyModel:e})}update(t,s,e){}}class C{constructor(){this.addDriver("single-line",(()=>new w)),this.addDriver("multi-line",(()=>new v)),this.addDriver("json",(()=>new f)),this.addDriver("check-list",(()=>new g)),this.addDriver("radio-list",(()=>new S)),this.addDriver("checkbox",(()=>new D)),this.addDriver("dropdown",(()=>new x)),this.addDriver("multi-text",(()=>new A)),this.addDriver("code-editor",(()=>new m)),this.addDriver("switch-case-builder",(()=>new L))}addDriver(t,s){c.addDriver(t,s)}}class b{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const e=t.activityModel;if("Fork"!==e.type)return;const n=s.Json,i=((e.properties||[]).find((t=>"Branches"==t.name))||{expressions:{Json:"[]"},syntax:n}).expressions[n]||[];t.outcomes=i.$values?i.$values:Array.isArray(i)?i:o(i)||[]}}class R{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const e=t.activityModel;if("RunJavaScript"!==e.type)return;const n=((e.properties||[]).find((t=>"PossibleOutcomes"==t.name))||{expressions:{Json:""},syntax:s.Json}).expressions[s.Json]||[];t.outcomes=Array.isArray(n)?n:o(n)||["Done"],0==t.outcomes.length&&(t.outcomes=["Done"])}}class T{constructor(){t.on(e.ActivityDescriptorDisplaying,this.onActivityDescriptorDisplaying),t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDescriptorDisplaying(t){const s=p.getIcon(t.activityDescriptor.type);s&&(t.activityIcon=s)}onActivityDesignDisplaying(t){const s=p.getIcon(t.activityModel.type);s&&(t.activityIcon=s)}}class j{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const s=t.activityModel,e=t.activityDescriptor.inputProperties.filter((t=>"switch-case-builder"==t.uiHint));if(0==e.length)return;let n={};for(const t of e){const e=((s.properties||[]).find((s=>s.name==t.name))||{expressions:{Switch:""},syntax:"Switch"}).expressions.Switch||[],i=e.$values?e.$values:Array.isArray(e)?e:o(e)||[];for(const t of i)n[t.name]=!0}const i=Object.keys(n);t.outcomes=[...i,"Default","Done"]}}class P{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const s=t.activityModel;if("While"!==s.type)return;const e=(s.properties||[]).find((t=>"Condition"==t.name))||{name:"Condition",expressions:{Literal:""},syntax:"Literal"},i=s.description,r=n(i&&i.length>0?i:e.expressions[e.syntax]||"");t.bodyDisplay=`<p>${r}</p>`}}class M{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const s=t.activityModel;if("StartAt"!==s.type)return;const e=(s.properties||[]).find((t=>"Instant"==t.name))||{name:"Instant",expressions:{Literal:""},syntax:"Literal"},i=n(e.expressions[e.syntax]||"");t.bodyDisplay=`<p>${i}</p>`}}class ${constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const s=t.activityModel;if("Cron"!==s.type)return;const e=(s.properties||[]).find((t=>"CronExpression"==t.name))||{name:"CronExpression",expressions:{Literal:""},syntax:"Literal"},i=n(e.expressions[e.syntax]||"");t.bodyDisplay=`<p>${i}</p>`}}class J{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDisplaying)}onActivityDisplaying(t){const e=t.activityModel;if("SignalReceived"!==e.type)return;const i=(e.properties||[]).find((t=>"Signal"==t.name))||{name:"Signal",expressions:{Literal:"",syntax:s.Literal}},r=n(i.expressions[i.syntax||s.Literal]);t.bodyDisplay=`<p>${r}</p>`}}class k{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDisplaying)}onActivityDisplaying(t){const e=t.activityModel;if("SendSignal"!==e.type)return;const i=(e.properties||[]).find((t=>"Signal"==t.name))||{name:"Signal",expressions:{Literal:"",syntax:s.Literal}},r=n(i.expressions[i.syntax||s.Literal]);t.bodyDisplay=`<p>${r}</p>`}}class E{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const e=t.activityModel;if("UserTask"!==e.type)return;const n=s.Json,i=((e.properties||[]).find((t=>"Actions"==t.name))||{expressions:{Json:"[]"},syntax:n}).expressions[n]||"[]";t.outcomes=i.$values?i.$values:Array.isArray(i)?i:o(i)||[]}}class N{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const e=t.activityModel;if("State"!==e.type)return;const i=e.properties||[],r=i.find((t=>"StateName"==t.name))||{name:"Text",expressions:{Literal:""},syntax:s.Literal};t.displayName=n(r.expressions[r.syntax||"Literal"]||"State");const a=s.Json,c=(i.find((t=>"Transitions"==t.name))||{expressions:{Json:"[]"},syntax:a}).expressions[a]||[];t.outcomes=c.$values?c.$values:Array.isArray(c)?c:o(c)||[]}}class H{constructor(){this.onActivityEditorAppearing=t=>{"SendHttpRequest"==t.activityDescriptor.type&&(document.querySelector("#ReadContent").addEventListener("change",this.updateUI),document.querySelector("#ResponseContentParserName").addEventListener("change",this.updateUI),this.updateUI())},this.onActivityEditorDisappearing=t=>{"SendHttpRequest"==t.activityDescriptor.type&&(document.querySelector("#ReadContent").removeEventListener("change",this.updateUI),document.querySelector("#ResponseContentParserName").removeEventListener("change",this.updateUI))},this.updateUI=()=>{const t=document.querySelector("#ReadContent"),s=document.querySelector("#ResponseContentParserName"),e=document.querySelector("#ResponseContentParserNameControl"),n=document.querySelector("#ResponseContentTargetTypeControl"),i=s.value;e.classList.toggle("hidden",!t.checked),n.classList.toggle("hidden",!t.checked||".NET Type"!=i)},t.on(e.ActivityEditor.Appearing,this.onActivityEditorAppearing),t.on(e.ActivityEditor.Disappearing,this.onActivityEditorDisappearing),t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const e=t.activityModel;if("SendHttpRequest"!==e.type)return;const n=s.Json,i=((e.properties||[]).find((t=>"SupportedStatusCodes"==t.name))||{expressions:{Json:"[]"},syntax:n}).expressions[n]||[];let r=i.$values?i.$values:Array.isArray(i)?i:o(i)||[];t.outcomes=[...r,"Done","Unsupported Status Code"]}}class q{constructor(){t.on(e.ActivityDesignDisplaying,this.onActivityDesignDisplaying)}onActivityDesignDisplaying(t){const e=t.activityModel;if("RunWorkflow"!==e.type)return;const n=s.Json,i=((e.properties||[]).find((t=>"PossibleOutcomes"==t.name))||{expressions:{Json:"[]"},syntax:n}).expressions[n]||[];let r=i.$values?i.$values:Array.isArray(i)?i:o(i)||[];r=["Done",...r,"Not Found"],t.outcomes=r}}class I{constructor(){this.plugins=[],this.pluginTypes=[],this.createPlugin=t=>new t(this.elsaStudio),this.pluginTypes=[C,T,l,P,b,j,y,H,u,M,$,J,k,d,q,N,R,E,h]}initialize(t){if(!this.initialized){this.elsaStudio=t;for(const t of this.pluginTypes)this.createPlugin(t);this.initialized=!0}}registerPlugins(t){for(const s of t)this.registerPlugin(s)}registerPlugin(t){this.pluginTypes.push(t),this.initialized&&this.createPlugin(t)}}const O=new I;export{I as P,O as p}